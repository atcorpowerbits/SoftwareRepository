/*
 * buffer.h
 *
 * Created: 9/10/2012 1:47:21 PM
 *  Author: yoonl
 */ 


#ifndef BUFFER_H_
#define BUFFER_H_

#include "conf_abpm.h"
#include "dsp.h"

#ifdef _DEBUG
// The wave_table(256 sample rate, 12bits, 5seconds) is for testing purpose only to check converted to C methods, will be removed after done converting to C.
static const uint16_t wave_table[1280] =
{
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
	1316,
	1322,
	1328,
	1327,
	1324,
	1322,
	1324,
	1327,
	1332,
	1335,
	1340,
	1349,
	1360,
	1367,
	1372,
	1377,
	1384,
	1391,
	1400,
	1408,
	1412,
	1409,
	1404,
	1400,
	1400,
	1399,
	1392,
	1374,
	1360,
	1358,
	1308,
	1316,
	1332,
	1349,
	1368,
	1391,
	1424,
	1472,
	1540,
	1631,
	1760,
	1928,
	2104,
	2255,
	2396,
	2539,
	2660,
	2732,
	2784,
	2843,
	2896,
	2923,
	2940,
	2963,
	2988,
	3006,
	3016,
	3016,
	3008,
	2989,
	2968,
	2949,
	2932,
	2912,
	2892,
	2871,
	2852,
	2834,
	2816,
	2792,
	2768,
	2748,
	2732,
	2714,
	2696,
	2676,
	2656,
	2634,
	2612,
	2590,
	2568,
	2544,
	2520,
	2494,
	2472,
	2453,
	2432,
	2402,
	2372,
	2348,
	2328,
	2305,
	2284,
	2263,
	2240,
	2207,
	2172,
	2140,
	2112,
	2084,
	2052,
	2009,
	1968,
	1937,
	1916,
	1899,
	1888,
	1880,
	1872,
	1861,
	1852,
	1847,
	1844,
	1836,
	1828,
	1824,
	1824,
	1824,
	1824,
	1820,
	1816,
	1812,
	1812,
	1816,
	1824,
	1830,
	1836,
	1840,
	1844,
	1845,
	1844,
	1839,
	1836,
	1836,
	1836,
	1830,
	1824,
	1819,
	1812,
	1799,
	1788,
	1783,
	1780,
	1771,
	1760,
	1748,
	1740,
	1734,
	1732,
	1729,
	1720,
	1701,
	1684,
	1675,
	1668,
	1652,
	1636,
	1628,
	1624,
	1614,
	1604,
	1597,
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
	1316,
	1322,
	1328,
	1327,
	1324,
	1322,
	1324,
	1327,
	1332,
	1335,
	1340,
	1349,
	1360,
	1367,
	1372,
	1377,
	1384,
	1391,
	1400,
	1408,
	1412,
	1409,
	1404,
	1400,
	1400,
	1399,
	1392,
	1374,
	1360,
	1358,
	1308,
	1316,
	1332,
	1349,
	1368,
	1391,
	1424,
	1472,
	1540,
	1631,
	1760,
	1928,
	2104,
	2255,
	2396,
	2539,
	2660,
	2732,
	2784,
	2843,
	2896,
	2923,
	2940,
	2963,
	2988,
	3006,
	3016,
	3016,
	3008,
	2989,
	2968,
	2949,
	2932,
	2912,
	2892,
	2871,
	2852,
	2834,
	2816,
	2792,
	2768,
	2748,
	2732,
	2714,
	2696,
	2676,
	2656,
	2634,
	2612,
	2590,
	2568,
	2544,
	2520,
	2494,
	2472,
	2453,
	2432,
	2402,
	2372,
	2348,
	2328,
	2305,
	2284,
	2263,
	2240,
	2207,
	2172,
	2140,
	2112,
	2084,
	2052,
	2009,
	1968,
	1937,
	1916,
	1899,
	1888,
	1880,
	1872,
	1861,
	1852,
	1847,
	1844,
	1836,
	1828,
	1824,
	1824,
	1824,
	1824,
	1820,
	1816,
	1812,
	1812,
	1816,
	1824,
	1830,
	1836,
	1840,
	1844,
	1845,
	1844,
	1839,
	1836,
	1836,
	1836,
	1830,
	1824,
	1819,
	1812,
	1799,
	1788,
	1783,
	1780,
	1771,
	1760,
	1748,
	1740,
	1734,
	1732,
	1729,
	1720,
	1701,
	1684,
	1675,
	1668,
	1652,
	1636,
	1628,
	1624,
	1614,
	1604,
	1597,
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
	1316,
	1322,
	1328,
	1327,
	1324,
	1322,
	1324,
	1327,
	1332,
	1335,
	1340,
	1349,
	1360,
	1367,
	1372,
	1377,
	1384,
	1391,
	1400,
	1408,
	1412,
	1409,
	1404,
	1400,
	1400,
	1399,
	1392,
	1374,
	1360,
	1358,
	1308,
	1316,
	1332,
	1349,
	1368,
	1391,
	1424,
	1472,
	1540,
	1631,
	1760,
	1928,
	2104,
	2255,
	2396,
	2539,
	2660,
	2732,
	2784,
	2843,
	2896,
	2923,
	2940,
	2963,
	2988,
	3006,
	3016,
	3016,
	3008,
	2989,
	2968,
	2949,
	2932,
	2912,
	2892,
	2871,
	2852,
	2834,
	2816,
	2792,
	2768,
	2748,
	2732,
	2714,
	2696,
	2676,
	2656,
	2634,
	2612,
	2590,
	2568,
	2544,
	2520,
	2494,
	2472,
	2453,
	2432,
	2402,
	2372,
	2348,
	2328,
	2305,
	2284,
	2263,
	2240,
	2207,
	2172,
	2140,
	2112,
	2084,
	2052,
	2009,
	1968,
	1937,
	1916,
	1899,
	1888,
	1880,
	1872,
	1861,
	1852,
	1847,
	1844,
	1836,
	1828,
	1824,
	1824,
	1824,
	1824,
	1820,
	1816,
	1812,
	1812,
	1816,
	1824,
	1830,
	1836,
	1840,
	1844,
	1845,
	1844,
	1839,
	1836,
	1836,
	1836,
	1830,
	1824,
	1819,
	1812,
	1799,
	1788,
	1783,
	1780,
	1771,
	1760,
	1748,
	1740,
	1734,
	1732,
	1729,
	1720,
	1701,
	1684,
	1675,
	1668,
	1652,
	1636,
	1628,
	1624,
	1614,
	1604,
	1597,
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
	1316,
	1322,
	1328,
	1327,
	1324,
	1322,
	1324,
	1327,
	1332,
	1335,
	1340,
	1349,
	1360,
	1367,
	1372,
	1377,
	1384,
	1391,
	1400,
	1408,
	1412,
	1409,
	1404,
	1400,
	1400,
	1399,
	1392,
	1374,
	1360,
	1358,
	1308,
	1316,
	1332,
	1349,
	1368,
	1391,
	1424,
	1472,
	1540,
	1631,
	1760,
	1928,
	2104,
	2255,
	2396,
	2539,
	2660,
	2732,
	2784,
	2843,
	2896,
	2923,
	2940,
	2963,
	2988,
	3006,
	3016,
	3016,
	3008,
	2989,
	2968,
	2949,
	2932,
	2912,
	2892,
	2871,
	2852,
	2834,
	2816,
	2792,
	2768,
	2748,
	2732,
	2714,
	2696,
	2676,
	2656,
	2634,
	2612,
	2590,
	2568,
	2544,
	2520,
	2494,
	2472,
	2453,
	2432,
	2402,
	2372,
	2348,
	2328,
	2305,
	2284,
	2263,
	2240,
	2207,
	2172,
	2140,
	2112,
	2084,
	2052,
	2009,
	1968,
	1937,
	1916,
	1899,
	1888,
	1880,
	1872,
	1861,
	1852,
	1847,
	1844,
	1836,
	1828,
	1824,
	1824,
	1824,
	1824,
	1820,
	1816,
	1812,
	1812,
	1816,
	1824,
	1830,
	1836,
	1840,
	1844,
	1845,
	1844,
	1839,
	1836,
	1836,
	1836,
	1830,
	1824,
	1819,
	1812,
	1799,
	1788,
	1783,
	1780,
	1771,
	1760,
	1748,
	1740,
	1734,
	1732,
	1729,
	1720,
	1701,
	1684,
	1675,
	1668,
	1652,
	1636,
	1628,
	1624,
	1614,
	1604,
	1597,
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
	1316,
	1322,
	1328,
	1327,
	1324,
	1322,
	1324,
	1327,
	1332,
	1335,
	1340,
	1349,
	1360,
	1367,
	1372,
	1377,
	1384,
	1391,
	1400,
	1408,
	1412,
	1409,
	1404,
	1400,
	1400,
	1399,
	1392,
	1374,
	1360,
	1358,
	1308,
	1316,
	1332,
	1349,
	1368,
	1391,
	1424,
	1472,
	1540,
	1631,
	1760,
	1928,
	2104,
	2255,
	2396,
	2539,
	2660,
	2732,
	2784,
	2843,
	2896,
	2923,
	2940,
	2963,
	2988,
	3006,
	3016,
	3016,
	3008,
	2989,
	2968,
	2949,
	2932,
	2912,
	2892,
	2871,
	2852,
	2834,
	2816,
	2792,
	2768,
	2748,
	2732,
	2714,
	2696,
	2676,
	2656,
	2634,
	2612,
	2590,
	2568,
	2544,
	2520,
	2494,
	2472,
	2453,
	2432,
	2402,
	2372,
	2348,
	2328,
	2305,
	2284,
	2263,
	2240,
	2207,
	2172,
	2140,
	2112,
	2084,
	2052,
	2009,
	1968,
	1937,
	1916,
	1899,
	1888,
	1880,
	1872,
	1861,
	1852,
	1847,
	1844,
	1836,
	1828,
	1824,
	1824,
	1824,
	1824,
	1820,
	1816,
	1812,
	1812,
	1816,
	1824,
	1830,
	1836,
	1840,
	1844,
	1845,
	1844,
	1839,
	1836,
	1836,
	1836,
	1830,
	1824,
	1819,
	1812,
	1799,
	1788,
	1783,
	1780,
	1771,
	1760,
	1748,
	1740,
	1734,
	1732,
	1729,
	1720,
	1701,
	1684,
	1675,
	1668,
	1652,
	1636,
	1628,
	1624,
	1614,
	1604,
	1597,
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
	1316,
	1322,
	1328,
	1327,
	1324,
	1322,
	1324,
	1327,
	1332,
	1335,
	1340,
	1349,
	1360,
	1367,
	1372,
	1377,
	1384,
	1391,
	1400,
	1408,
	1412,
	1409,
	1404,
	1400,
	1400,
	1399,
	1392,
	1374,
	1360,
	1358,
	1308,
	1316,
	1332,
	1349,
	1368,
	1391,
	1424,
	1472,
	1540,
	1631,
	1760,
	1928,
	2104,
	2255,
	2396,
	2539,
	2660,
	2732,
	2784,
	2843,
	2896,
	2923,
	2940,
	2963,
	2988,
	3006,
	3016,
	3016,
	3008,
	2989,
	2968,
	2949,
	2932,
	2912,
	2892,
	2871,
	2852,
	2834,
	2816,
	2792,
	2768,
	2748,
	2732,
	2714,
	2696,
	2676,
	2656,
	2634,
	2612,
	2590,
	2568,
	2544,
	2520,
	2494,
	2472,
	2453,
	2432,
	2402,
	2372,
	2348,
	2328,
	2305,
	2284,
	2263,
	2240,
	2207,
	2172,
	2140,
	2112,
	2084,
	2052,
	2009,
	1968,
	1937,
	1916,
	1899,
	1888,
	1880,
	1872,
	1861,
	1852,
	1847,
	1844,
	1836,
	1828,
	1824,
	1824,
	1824,
	1824,
	1820,
	1816,
	1812,
	1812,
	1816,
	1824,
	1830,
	1836,
	1840,
	1844,
	1845,
	1844,
	1839,
	1836,
	1836,
	1836,
	1830,
	1824,
	1819,
	1812,
	1799,
	1788,
	1783,
	1780,
	1771,
	1760,
	1748,
	1740,
	1734,
	1732,
	1729,
	1720,
	1701,
	1684,
	1675,
	1668,
	1652,
	1636,
	1628,
	1624,
	1614,
	1604,
	1597,
	1592,
	1585,
	1576,
	1562,
	1548,
	1537,
	1528,
	1517,
	1504,
	1486,
	1472,
	1468,
	1468,
	1461,
	1448,
	1431,
	1416,
	1402,
	1392,
	1383,
	1376,
	1369,
	1360,
	1343,
	1328,
	1321,
	1320,
	1319,
	1320,
	1321,
	1320,
	1314,
	1312,
	1318,
	1324,
	1321,
	1316,
	1316,
	1320,
	1321,
	1320,
	1315,
	1312,
	1311,
};
#endif

uint16_t *adc_buffer; // 256 sample rate, 12bits, 5seconds

bool ADCBuffer_init(void);
void AddSignal(uint16_t signal);
bool IsADCBufferFull(void);
void ADCBuffer_final(void);

#endif /* BUFFER_H_ */